From 71a995356b6fe792c108a55be09bb8a307327903 Mon Sep 17 00:00:00 2001
From: yousour <hengyousour@gmail.com>
Date: Tue, 17 Nov 2015 10:38:47 +0700
Subject: [PATCH] close menu follow the role

---
 dental/client/templates/layout/navbar.html | 14 +++++++++++---
 dental/common/collections/patient.js       |  3 +--
 2 files changed, 12 insertions(+), 5 deletions(-)

diff --git a/dental/client/templates/layout/navbar.html b/dental/client/templates/layout/navbar.html
index ec9e085..229c593 100644
--- a/dental/client/templates/layout/navbar.html
+++ b/dental/client/templates/layout/navbar.html
@@ -1,6 +1,7 @@
 <template name="dental_navbar">
         <li class="{{isActiveRoute name='dental.home'}}"><a href="{{pathFor 'dental.home'}}">Home</a></li>
-
+ {{#if isInRole 'data-insert,data-update,data-remove,data-patient-insert' 'Dental'}}
+ <!--Data-->
         <li class="dropdown">
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                 Data <span class="caret"></span>
@@ -35,12 +36,16 @@
             </ul>
         </li>
 
+
         <!--Calendar-->
         <li class="{{isActiveRoute name='dental.calendar'}}"><a href="{{pathFor 'dental.calendar'}}">Calendar</a></li>
 
-        <!-- Alert Event Message -->
+        <!--Alert Event Message-->
         {{> dental_alertEventMsg}}
+{{/if}}
 
+        <!--Report-->
+ {{#if isInRole 'reporter' 'Dental'}}
         <li class="dropdown">
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                 Reports <span class="caret"></span>
@@ -110,7 +115,10 @@
 
             </ul>
         </li>
+{{/if}}
 
+<!--Setting-->
+ {{#if isInRole 'setting' 'Dental'}}
         <li class="dropdown">
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                 Setting <span class="caret"></span>
@@ -164,5 +172,5 @@
 
             </ul>
         </li>
-
+{{/if}}
 </template>
diff --git a/dental/common/collections/patient.js b/dental/common/collections/patient.js
index bfc9b08..fc70731 100644
--- a/dental/common/collections/patient.js
+++ b/dental/common/collections/patient.js
@@ -27,8 +27,7 @@ Dental.Schema.Patient = new SimpleSchema({
   age: {
     type: Number,
     max: 110,
-    min: 1,
-    optional: true
+    min: 1
   },
   occupation: {
     type: String,
-- 
1.9.1

